{% extends 'base.html' %}
{% block title %} Weekly Appointments {% endblock %}

{% block content %}

<head>
    <style>
        p {
            white-space: pre-line; /* collapse WS, preserve LB */
          }
       </style>
</head>

<button><a href="{% url 'daily' %}">Daily View</a></button>
<button><a href="{% url 'weekly' %}">This Week</a></button>

{% if WeeklyAppointments %}
    <h1 style='text-align: center;'>This week's appointments are:</h1>
    <h2 style='text-align: center;'>({{dates.0.1}} {{dates.0.2}} - {{dates.4.1}} {{dates.4.2}})
        <button><a href="{% url 'previous_week' %}">Previous week</button></a>
        <button><a href="{% url 'next_week' %}">Next Week</button></a><br>
    </h2>

    {% for date in dates %}
        <span class="col-md-1" style="background-color:turquoise; font-size:30px;">
            {{date.0}} | {{date.1}} {{date.2}}
        </span>
        {% if no_appointments %}
            <p><br></p>
        {% endif %}
        {% for appointment in WeeklyAppointments %}
            {% if user.username == appointment.0.user.username %}
            
                {% if appointment.0.datetime.day == date.2 %}
                    <div class="row" style="background-color:beige; font-size:20px;">
                            <p>{{appointment.1}}<br>
                            {{appointment.0.client.name}}<br>
                            {{appointment.0.get_setting_display}}</p>
                            {{appointment.0.user.username}}
                    </div>
                    <br>
                {% endif %}
            {% endif %}
        {% endfor %}
    {% endfor %}
{% else %}
    <h1 style='text-align: center;'>No appointments for selected week</h1>
    <h2 style='text-align: center;'>({{dates.0.1}} {{dates.0.2}} - {{dates.4.1}} {{dates.4.2}})
    <button><a href="{% url 'previous_week' %}">Previous week</button></a>
    <button><a href="{% url 'next_week' %}">Next Week</button></a><br>
{% endif %}

{% endblock %}
